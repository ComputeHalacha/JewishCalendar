(function(){"use strict";function n(t){var r;if(t)$("#divMainPage").jqmData("currentjDate",t);else if($("#divMainPage").jqmData("currentjDate"))t=$("#divMainPage").jqmData("currentjDate");else{n(new jDate(new Date));return}r=getLocation();$("#h2Header").html(t.toStringHeb()+"<br />"+t.getDate().toDateString());$("#divCaption").html("Location set to "+r.Name);$("#emLocDet").html("lat: "+r.Latitude.toString()+" long:"+r.Longitude.toString()+(r.Israel?" | Israel":"")+"  |  "+(r.IsDST?"DST":"not DST"));for(var i=t.addDays(-(t.Day-1)),u=i.getDayOfWeek(),o=jDate.daysJMonth(t.Year,t.Month),f=1,e;i.Month===t.Month;)e=$("#tblCal tr").eq(f).find("td").eq(u),$(e).html('<div class="jd">'+Utils.toJNum(i.Day)+'<\/div><div class="sd">'+i.getDate().getDate()+"<\/div>"),console.log("Did day: "+i.Day.toString()),i=i.addDays(1),u=i.getDayOfWeek(),u===0&&f++}function t(t){var i=$("#divMainPage").jqmData("currentjDate");i&&n(i.addDays(t))}function i(t){var i=$("#divMainPage").jqmData("currentjDate");i&&n(i.addMonths(t))}function r(t){var i=$("#divMainPage").jqmData("currentjDate");i&&n(i.addYears(t))}document.onDeviceReady=function(){n()};document.onDevicePause=function(){};document.onDeviceResume=function(){n()};document.onLocationChanged=function(){n()};$(document).on("pagecreate","#divMainPage",function(){$("#btnNextDay").on("click",function(){t(1)});$("#btnNextWeek").on("click",function(){t(7)});$("#btnNextMonth").on("click",function(){i(1)});$("#btnNextYear").on("click",function(){r(1)});$("#btnPrevWeek").on("click",function(){t(-7)});$("#btnPrevMonth").on("click",function(){i(-1)});$("#btnPrevYear").on("click",function(){r(-1)}).on("swipeup","#divMainPage",function(){t(-1)}).on("swipedown","#divMainPage",function(){t(1)});window.cordova||n()})})();